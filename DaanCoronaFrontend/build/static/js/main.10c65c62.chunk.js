(this.webpackJsonpdaancoronafrontend=this.webpackJsonpdaancoronafrontend||[]).push([[0],{108:function(e,a,t){e.exports={"login-form":"Form_login-form__1tnQr","login-form-forgot":"Form_login-form-forgot__1Xs5_","login-form-button":"Form_login-form-button__1mItG"}},142:function(e,a,t){e.exports=t.p+"static/media/money.ff7d3672.svg"},143:function(e,a,t){e.exports=t.p+"static/media/gift.e40d47dd.svg"},144:function(e,a,t){e.exports=t.p+"static/media/select.3ac830f7.svg"},145:function(e,a,t){e.exports=t.p+"static/media/login.b2c964ae.svg"},147:function(e,a,t){e.exports=t.p+"static/media/CORONADAAN.1e3e9fac.png"},154:function(e,a,t){e.exports=t.p+"static/media/confirmed-red.704f267c.svg"},155:function(e,a,t){e.exports=t.p+"static/media/voucher.f1ee105e.svg"},156:function(e,a,t){e.exports=t.p+"static/media/profile.e65f59bf.svg"},157:function(e,a,t){e.exports=t.p+"static/media/profile_pic.6a3966fb.svg"},161:function(e,a,t){e.exports=t(309)},166:function(e,a,t){},167:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},168:function(e,a,t){},2:function(e,a,t){e.exports={selectShop:"Shops_selectShop__2d4T3",shopListItem:"Shops_shopListItem__1GvDs",navigation:"Shops_navigation__156Z3",shops:"Shops_shops__8twbb",shop:"Shops_shop__3pNyh",details:"Shops_details__3ebOJ",shopName:"Shops_shopName__1rPbP",ownerName:"Shops_ownerName__2WGKP",amount:"Shops_amount__395Zo",phone:"Shops_phone__GhFTs",uid:"Shops_uid__1039S",address:"Shops_address__2eb94"}},309:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(5),o=t.n(r),s=(t(166),t(15)),c=t(16),i=t(19),m=t(20),u=t(39),p=(t(167),t(168),t(53)),d=t.n(p),h=t(314),f=t(310),E=t(311),g=t(38),_=(t(169),t(318)),v=t(317),N=t(108),b=t.n(N),y="https://daancorona.pythonanywhere.com",S=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).state={showOTPInput:!1},n.submitHandler=function(){!0===n.state.showOTPInput?n.otpHandler():n.getOTP()},n.getOTP=function(){var e=new FormData;e.append("mobile",n.mobile.current.input.value),fetch(y+"/api/mobile/",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){e.otp?(console.log(e),n.setState({showOTPInput:!0}),h.a.success("OTP sent successfully!")):(console.log(e),h.a.error("Server error!"))})).catch((function(e){console.log(e),h.a.error("Network error!")}))},n.otpHandler=function(){var e=new FormData;e.append("mobile",n.mobile.current.input.value),e.append("token",n.otp.current.input.value),fetch(y+"/api/otp/",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){e.token?(console.log(e),h.a.success("Almost there!"),sessionStorage.setItem("token",e.token.access),sessionStorage.setItem("newUser",e.newUser),window.location.href="/profile"):(console.log(e),h.a.error("Server error!"))})).catch((function(e){console.log(e),h.a.error("Network error!")}))},n.mobile=l.a.createRef(),n.otp=l.a.createRef(),n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.mobile.current.focus()}},{key:"render",value:function(){return l.a.createElement(f.a,{onSubmit:this.handleSubmit,className:b.a.loginForm},l.a.createElement(f.a.Item,null,l.a.createElement(E.a,{ref:this.mobile,type:"tel",prefix:l.a.createElement(_.a,{className:"site-form-item-icon"}),placeholder:"Mobile"})),this.state.showOTPInput?l.a.createElement(f.a.Item,null,l.a.createElement(E.a,{ref:this.otp,type:"text",prefix:l.a.createElement(v.a,{className:"site-form-item-icon"}),placeholder:"OTP"})):null,l.a.createElement(f.a.Item,null,l.a.createElement(g.a,{type:"primary",htmlType:"submit",onClick:this.submitHandler,className:b.a.loginFormButton},this.state.showOTPInput?"Login/Register":"Get OTP")))}}]),t}(l.a.Component),w=t(142),k=t.n(w),P=t(143),O=t.n(P),j=t(144),A=t.n(j),I=t(145),C=t.n(I),D=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:d.a.home},l.a.createElement("div",{className:d.a.details},l.a.createElement("h1",null,"DaanCorona"),l.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),l.a.createElement("img",{src:k.a})),l.a.createElement("div",{className:d.a.login},l.a.createElement("div",{className:d.a.loginForm},l.a.createElement("h2",null,"Register in just 1 minute!"),l.a.createElement(S,null)),l.a.createElement("div",{className:d.a.steps},l.a.createElement("h2",null,"3 easy steps -"),l.a.createElement("div",null,l.a.createElement("h3",null,"1. Register"),l.a.createElement("img",{src:C.a})),l.a.createElement("div",null,l.a.createElement("h3",null,"2. Select a shop"),l.a.createElement("img",{src:A.a})),l.a.createElement("div",null,l.a.createElement("h3",null,"3. Donate and get your voucher"),l.a.createElement("img",{src:O.a})))))}}]),t}(l.a.Component),T=t(312),x=t(2),q=t.n(x),F=t(33),L=t.n(F),R=t(43),M=t(316),U=t(319),z=t(315),B=t(62),$=t.n(B),G=Object(u.f)((function(){return l.a.createElement("div",{className:$.a.navbar},l.a.createElement(R.b,{className:$.a.link,to:"profile"},l.a.createElement(M.a,{twoToneColor:"#eb2f96"})," Profile"),l.a.createElement(R.b,{className:$.a.link,to:"/shops"},l.a.createElement(U.a,null)," Shops"),l.a.createElement(R.b,{className:$.a.link,to:"/payment"},l.a.createElement(z.a,{twoToneColor:"#52c41a"})," Donations"))})),W=t(63),X=t.n(W),H=t(113),Z=t(147),J=t.n(Z),Y=function(){var e={key:"rzp_test_cxBvdprdwiST2G",amount:"50000",currency:"INR",name:"Acme Corp",description:"Test Transaction",image:J.a,order_id:"order_9A33XWu170gUtm",handler:function(e){a(e)},prefill:{name:"Gaurav Kumar",email:"gaurav.kumar@example.com",contact:"9999999999"},notes:{address:"Razorpay Corporate Office"},theme:{color:"#F37254"}},a=function(e){var a=sessionStorage.getItem("token"),t=new FormData;t.append("razorpay_payment_id",e.razorpay_payment_id),t.append("razorpay_order_id",e.razorpay_order_id),t.append("razorpay_signature",e.razorpay_signature),fetch(y+"/api/pay_callback/",{method:"POST",headers:{Authorization:"JWT "+a},body:t}).then((function(e){return e.json()})).then((function(e){console.log(e),h.a.success("Yipee! Thanks for donating, check your payment and voucher details in the Payment section!")})).catch((function(e){console.log(e),h.a.success("Yipee! Thanks for donating, check your payment and voucher details in the Payment section!")}))},t=function(){var a=Object(H.a)(X.a.mark((function a(){var t,n,l,r,o=arguments;return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1,n=o.length>1&&void 0!==o[1]?o[1]:5e4,l=sessionStorage.getItem("token"),(r=new FormData).append("recepient_id",t),r.append("amount",n),l||(window.location.href="/",h.a.warning("Please login again!")),a.next=9,fetch(y+"/api/pay/",{method:"POST",headers:{Authorization:"JWT "+l},body:r}).then((function(e){return e.json()})).then((function(a){if(a)return console.log(a),a,e.order_id=a.order_id,h.a.success("Success, wait till we redirect you!"),a})).catch((function(e){console.log(e),h.a.error("Server error!")}));case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),r=function(){var a=Object(H.a)(X.a.mark((function a(){return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t();case 2:new window.Razorpay(e).open();case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=document.createElement("script");e.src="https://checkout.razorpay.com/v1/checkout.js",e.async=!0,document.body.appendChild(e)}),[]),l.a.createElement("form",{action:"http://127.0.0.1:8000/dummy/callback/",method:"POST"},l.a.createElement(g.a,{onClick:r},"Pay with Razorpay"))},V=E.a.Search,Q=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).searchShop=function(e){fetch("https://maps.googleapis.com/maps/api/place/textsearch/json?"+new URLSearchParams({query:e,key:"AIzaSyAI8QRuruBCB0g_T-mobNkDuVmHoJiwqHM"}),{method:"GET"}).then((function(e){return e.json()})).then((function(e){0===e.results.length?h.a.error("Wo oh! No results found, please use a different search query!"):n.showShops(e.results)})).catch((function(e){console.log(e)}))},n.showModal=function(){n.setState({visible:!0})},n.handleCancel=function(){console.log("Returning"),n.setState({visible:!1})},n.showShops=function(e){if(console.log(e),1==e.length){var a={coords:{latitude:e[0].geometry.location.lat,longitude:e[0].geometry.location.lng}};n.getShops(a)}else n.setState({shops:e}),n.setState({visible:!0})},n.getLoc=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(n.getShops)},n.setLoc=function(e,a){console.log(e,a);var t={coords:{latitude:e,longitude:a}};n.getShops(t),n.handleCancel(),h.a.success("Yaas! Updating results, please wait!")},n.getShops=function(e){var a=sessionStorage.getItem("token"),t=new FormData;t.append("lat",e.coords.latitude),t.append("long",e.coords.longitude),console.log(e.coords),a||(window.location.href="/",h.a.warning("Please login again!")),fetch(y+"/api/nearby_recipients/",{method:"POST",headers:{Authorization:"JWT "+a},body:t}).then((function(e){if(401!=e.status)return e.json();h.a.warning("You have been logged out! Please login again, redirecting in 2 seconds!"),setInterval((function(){window.location.href="/"}),2e3)})).then((function(e){e?(console.log(e),n.setState({recipients:e.nearby_recipients}),h.a.success("Nearby shops fetched, updated details!")):(console.log(e),h.a.error("No nearby shops are registered!"))})).catch((function(e){console.log(e),h.a.error("Server error, failed to fetch details!")}))},n.state={loading:!1,visible:!1,shops:null,recipients:null},n}return Object(c.a)(t,[{key:"componentWillMount",value:function(){this.getLoc()}},{key:"render",value:function(){var e=this,a=null;return null!=this.state.shops&&(a=l.a.createElement(T.a,{className:q.a.resultModal,visible:this.state.visible,title:"Click on any result to proceed.",onCancel:this.handleCancel,footer:[l.a.createElement(g.a,{key:"back",onClick:this.handleCancel},"Return")]},l.a.createElement("ol",{className:q.a.shopList},this.state.shops.map((function(a,t){return l.a.createElement("li",{className:"shopListItem",key:t,onClick:function(){return e.setLoc(a.geometry.location.lat,a.geometry.location.lng)}},l.a.createElement("p",null,"Name: ",a.name),l.a.createElement("p",null,"Address: ",a.formatted_address))}))))),l.a.createElement("div",{className:q.a.selectShop},a,l.a.createElement("div",{className:q.a.navigation},l.a.createElement(V,{placeholder:"Search for a shop, location etc.",onSearch:function(a){return e.searchShop(a)},enterButton:!0}),l.a.createElement(G,null)),l.a.createElement("div",{className:q.a.shops},this.state.recipients?this.state.recipients.map((function(e,a){return l.a.createElement("div",{key:a,className:q.a.shop},l.a.createElement("img",{src:y+e.business_photo}),l.a.createElement("div",{className:q.a.details},l.a.createElement("h4",{className:q.a.shopName},e.business_name),l.a.createElement("p",{className:q.a.ownerName},l.a.createElement("strong",null,"Name:")," ",e.first_name,"+",e.last_name),l.a.createElement("p",{className:q.a.amount},l.a.createElement("strong",null,"Amount:")," Rs.500"),l.a.createElement("p",{className:q.a.phone},l.a.createElement("strong",null,"Phone:")," +919999988888"),l.a.createElement("p",{className:q.a.uid},l.a.createElement("strong",null,"Unique ID: ")," ",e.recipient_id),l.a.createElement("p",{className:q.a.address},l.a.createElement("strong",null,"Address: ")," ",e.address)),l.a.createElement(Y,null))})):null,l.a.createElement("div",{className:q.a.shop},l.a.createElement("img",{src:L.a}),l.a.createElement("div",{className:q.a.details},l.a.createElement("h4",{className:q.a.shopName},"Loading"),l.a.createElement("p",{className:q.a.ownerName},l.a.createElement("strong",null,"Name:")," Professor"),l.a.createElement("p",{className:q.a.amount},l.a.createElement("strong",null,"Amount:")," $500"),l.a.createElement("p",{className:q.a.phone},l.a.createElement("strong",null,"Phone:")," +919999988888"),l.a.createElement("p",{className:q.a.uid},l.a.createElement("strong",null,"Unique ID:")," XyZ1982"),l.a.createElement("p",{className:q.a.address},l.a.createElement("strong",null,"Address:")," 333 Alacantra, Madrid, Spain - 110086")),l.a.createElement(Y,null)),l.a.createElement("div",{className:q.a.shop},l.a.createElement("img",{src:L.a}),l.a.createElement("div",{className:q.a.details},l.a.createElement("h4",{className:q.a.shopName},"Loading"),l.a.createElement("p",{className:q.a.ownerName},l.a.createElement("strong",null,"Name:")," Professor"),l.a.createElement("p",{className:q.a.amount},l.a.createElement("strong",null,"Amount:")," $500"),l.a.createElement("p",{className:q.a.phone},l.a.createElement("strong",null,"Phone:")," +919999988888"),l.a.createElement("p",{className:q.a.uid},l.a.createElement("strong",null,"Unique ID:")," XyZ1982"),l.a.createElement("p",{className:q.a.address},l.a.createElement("strong",null,"Address:")," 333 Alacantra, Madrid, Spain - 110086"))),l.a.createElement("div",{className:q.a.shop},l.a.createElement("img",{src:L.a}),l.a.createElement("div",{className:q.a.details},l.a.createElement("h4",{className:q.a.shopName},"Loading"),l.a.createElement("p",{className:q.a.ownerName},l.a.createElement("strong",null,"Name:")," Professor"),l.a.createElement("p",{className:q.a.amount},l.a.createElement("strong",null,"Amount:")," $500"),l.a.createElement("p",{className:q.a.phone},l.a.createElement("strong",null,"Phone:")," +919999988888"),l.a.createElement("p",{className:q.a.uid},l.a.createElement("strong",null,"Unique ID:")," XyZ1982"),l.a.createElement("p",{className:q.a.address},l.a.createElement("strong",null,"Address:")," 333 Alacantra, Madrid, Spain - 110086"))),l.a.createElement("div",{className:q.a.shop},l.a.createElement("img",{src:L.a}),l.a.createElement("div",{className:q.a.details},l.a.createElement("h4",{className:q.a.shopName},"Loading"),l.a.createElement("p",{className:q.a.ownerName},l.a.createElement("strong",null,"Name:")," Professor"),l.a.createElement("p",{className:q.a.amount},l.a.createElement("strong",null,"Amount:")," $500"),l.a.createElement("p",{className:q.a.phone},l.a.createElement("strong",null,"Phone:")," +919999988888"),l.a.createElement("p",{className:q.a.uid},l.a.createElement("strong",null,"Unique ID:")," XyZ1982"),l.a.createElement("p",{className:q.a.address},l.a.createElement("strong",null,"Address:")," 333 Alacantra, Madrid, Spain - 110086"))),l.a.createElement("div",{className:q.a.shop},l.a.createElement("img",{src:L.a}),l.a.createElement("div",{className:q.a.details},l.a.createElement("h4",{className:q.a.shopName},"Loading"),l.a.createElement("p",{className:q.a.ownerName},l.a.createElement("strong",null,"Name:")," Professor"),l.a.createElement("p",{className:q.a.amount},l.a.createElement("strong",null,"Amount:")," $500"),l.a.createElement("p",{className:q.a.phone},l.a.createElement("strong",null,"Phone:")," +919999988888"),l.a.createElement("p",{className:q.a.uid},l.a.createElement("strong",null,"Unique ID:")," XyZ1982"),l.a.createElement("p",{className:q.a.address},l.a.createElement("strong",null,"Address:")," 333 Alacantra, Madrid, Spain - 110086"))),l.a.createElement("div",{className:q.a.shop},l.a.createElement("img",{src:L.a}),l.a.createElement("div",{className:q.a.details},l.a.createElement("h4",{className:q.a.shopName},"Loading"),l.a.createElement("p",{className:q.a.ownerName},l.a.createElement("strong",null,"Name:")," Professor"),l.a.createElement("p",{className:q.a.amount},l.a.createElement("strong",null,"Amount:")," $500"),l.a.createElement("p",{className:q.a.phone},l.a.createElement("strong",null,"Phone:")," +919999988888"),l.a.createElement("p",{className:q.a.uid},l.a.createElement("strong",null,"Unique ID:")," XyZ1982"),l.a.createElement("p",{className:q.a.address},l.a.createElement("strong",null,"Address:")," 333 Alacantra, Madrid, Spain - 110086"))),l.a.createElement("div",{className:q.a.shop},l.a.createElement("img",{src:L.a}),l.a.createElement("div",{className:q.a.details},l.a.createElement("h4",{className:q.a.shopName},"Loading"),l.a.createElement("p",{className:q.a.ownerName},l.a.createElement("strong",null,"Name:")," Professor"),l.a.createElement("p",{className:q.a.amount},l.a.createElement("strong",null,"Amount:")," $500"),l.a.createElement("p",{className:q.a.phone},l.a.createElement("strong",null,"Phone:")," +919999988888"),l.a.createElement("p",{className:q.a.uid},l.a.createElement("strong",null,"Unique ID:")," XyZ1982"),l.a.createElement("p",{className:q.a.address},l.a.createElement("strong",null,"Address:")," 333 Alacantra, Madrid, Spain - 110086"))),l.a.createElement("div",{className:q.a.shop},l.a.createElement("img",{src:L.a}),l.a.createElement("div",{className:q.a.details},l.a.createElement("h4",{className:q.a.shopName},"Loading"),l.a.createElement("p",{className:q.a.ownerName},l.a.createElement("strong",null,"Name:")," Professor"),l.a.createElement("p",{className:q.a.amount},l.a.createElement("strong",null,"Amount:")," $500"),l.a.createElement("p",{className:q.a.phone},l.a.createElement("strong",null,"Phone:")," +919999988888"),l.a.createElement("p",{className:q.a.uid},l.a.createElement("strong",null,"Unique ID:")," XyZ1982"),l.a.createElement("p",{className:q.a.address},l.a.createElement("strong",null,"Address:")," 333 Alacantra, Madrid, Spain - 110086")))))}}]),t}(l.a.Component),K=t(54),ee=t.n(K),ae=t(154),te=t.n(ae),ne=t(155),le=t.n(ne),re=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:ee.a.details},l.a.createElement(G,null),l.a.createElement("div",{className:ee.a.payment},l.a.createElement("img",{src:te.a}),l.a.createElement("div",{className:ee.a.pSummary},l.a.createElement("h2",null,"Thanks for donating to Kumar Cyber Cafe!"),l.a.createElement("h3",null,"Payment Summary"),l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Amount:")," Rs. 500"),l.a.createElement("p",null,l.a.createElement("b",null,"Owner Name:")," Rajiv Kumar"),l.a.createElement("p",null,l.a.createElement("b",null,"Phone Number:")," +919999988888"),l.a.createElement("p",null,l.a.createElement("b",null,"Address:")," F1/82, Sultanpuri, Near Shagun Restaurant, New Delhi, Delhi 110086")))),l.a.createElement("div",{className:ee.a.voucher},l.a.createElement("img",{src:le.a}),l.a.createElement("div",{className:ee.a.vSummary},l.a.createElement("h3",null,"Voucher details"),l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Value:")," Rs. 400"),l.a.createElement("p",null,l.a.createElement("b",null,"Unique Voucher No:")," xYz919"),l.a.createElement("p",null,l.a.createElement("b",null,"User ID:")," ABX91"),l.a.createElement("p",null,l.a.createElement("b",null,"Username:")," Akhil Vats"),l.a.createElement("p",null,l.a.createElement("b",null,"Email:")," akhilvats5199@gmail.com")))))}}]),t}(l.a.Component),oe=t(34),se=t.n(oe),ce=t(156),ie=t.n(ce),me=t(157),ue=t.n(me),pe=t(55),de=t.n(pe),he=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).layout={labelCol:{span:8},wrapperCol:{span:12}},n.validateMessages={required:"${label} is required!",types:{email:"${label} is not validate email!",number:"${label} is not a validate number!"},number:{range:"${label} must be between ${min} and ${max}"}},n.submitDetails=function(){var e=sessionStorage.getItem("token"),a=n.photo.current.input.files[0];console.log(a);var t=new FormData;t.append("first_name",n.fname.current.input.value),t.append("last_name",n.lname.current.input.value),t.append("donor_photo",a),t.append("email",n.email.current.input.value),fetch(y+"/api/donor_profile/",{method:"POST",headers:{Authorization:" JWT "+e},body:t}).then((function(e){201==e.status?(console.log(e),h.a.success("Details updated successfully!")):(console.log(e),h.a.error("Server error!"))})).catch((function(e){console.log(e),h.a.error("Network error!")}))},n.onFirstNameChange=function(e){n.setState({first_name:e})},n.onLastNameChange=function(e){n.setState({last_name:e})},n.onEmailChange=function(e){n.setState({email:e})},n.fname=l.a.createRef(),n.lname=l.a.createRef(),n.email=l.a.createRef(),n.photo=l.a.createRef(),n.state={first_name:n.props.first_name,last_name:n.props.last_name,email:n.props.email,donor_photo:null},n}return Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(f.a,{className:de.a.form,encType:"multipart/form-data",onFinish:this.onFinish,validateMessages:this.validateMessages},l.a.createElement(f.a.Item,Object.assign({},this.layout,{className:de.a.fields,name:["user","firstname"],label:"First Name",rules:[{required:!0}]}),l.a.createElement(E.a,{value:this.state.first_name,onChange:function(a){return e.onFirstNameChange(a.target.value)},ref:this.fname})),l.a.createElement(f.a.Item,Object.assign({},this.layout,{className:de.a.fields,name:["user","lastname"],label:"Last Name",rules:[{required:!0}]}),l.a.createElement(E.a,{value:this.state.last_name,onChange:function(a){return e.onLastNameChange(a.target.value)},ref:this.lname})),l.a.createElement(f.a.Item,Object.assign({},this.layout,{className:de.a.fields,name:["user","email"],label:"Email",rules:[{type:"email",required:!0}]}),l.a.createElement(E.a,{value:this.state.email,onChange:function(a){return e.onEmailChange(a.target.value)},ref:this.email})),l.a.createElement(f.a.Item,Object.assign({},this.layout,{className:de.a.fields,label:"Profile Photo"}),l.a.createElement(E.a,{type:"file",accept:"image/*",name:["user","photo"],ref:this.photo})),l.a.createElement(f.a.Item,null,l.a.createElement(g.a,{shape:"round",type:"primary",htmlType:"submit",onClick:this.submitDetails},"Save details")))}}]),t}(l.a.Component),fe=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={first_name:null,last_name:null,email:null,donor_id:null,donor_photo:null,edit_details:!0},e.toggleEditDetails=function(){e.setState({edit_details:!e.state.edit_details})},e}return Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,a=sessionStorage.getItem("token");fetch(y+"/api/donor_profile/",{method:"GET",headers:{Authorization:"JWT "+a}}).then((function(e){if(401!=e.status)return e.json();h.a.warning("You have been logged out! Please login again, redirecting in 2 seconds!"),setInterval((function(){window.location.href="/"}),2e3)})).then((function(a){a&&(console.log(a),e.setState({first_name:a.first_name,last_name:a.last_name,email:a.email,donor_id:a.donor_id,donor_photo:a.donor_photo,edit_details:!1}),h.a.success("Details fetched successfully!"))})).catch((function(e){console.log(e),h.a.warning("Details not found, please register first!")}))}},{key:"render",value:function(){var e=l.a.createElement("div",{className:se.a.userDetails},l.a.createElement("h1",null,l.a.createElement("span",null,"Hello,")," ",this.state.first_name,"!"),l.a.createElement("p",null,l.a.createElement("span",null,"First name:")," ",this.state.first_name),l.a.createElement("p",null,l.a.createElement("span",null,"Last name:")," ",this.state.last_name),l.a.createElement("p",null,l.a.createElement("span",null,"Email:")," ",this.state.email),l.a.createElement("p",null,l.a.createElement("span",null,"Donor_ID:")," ",this.state.donor_id),l.a.createElement(g.a,{type:"primary",shape:"round",onClick:this.toggleEditDetails,className:se.a.editBtn},"Click to edit"));return l.a.createElement("div",{className:se.a.profile},l.a.createElement(G,null),l.a.createElement("div",{className:se.a.profileInfo},l.a.createElement("img",{src:this.state.donor_photo?y+this.state.donor_photo:ue.a,className:se.a.profilePic}),0==this.state.edit_details?e:l.a.createElement("div",{className:se.a.formDiv},l.a.createElement(he,{first_name:this.state.first_name,last_name:this.state.last_name,email:this.state.email}),l.a.createElement(g.a,{type:"primary",shape:"round",onClick:this.toggleEditDetails,className:se.a.goBackBtn},"Go back!"))),l.a.createElement("div",{className:se.a.profileSVG},l.a.createElement("img",{src:ie.a})))}}]),t}(l.a.Component),Ee=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/",exact:!0,component:D}),l.a.createElement(u.a,{path:"/payment",exact:!0,component:re}),l.a.createElement(u.a,{path:"/shops",exact:!0,component:Q}),l.a.createElement(u.a,{path:"/profile",exact:!0,component:fe}),l.a.createElement(u.a,{path:"/",component:D})))}}]),t}(l.a.Component),ge=Object(u.f)(Ee);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(R.a,null,l.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},33:function(e,a,t){e.exports=t.p+"static/media/thumbnail.c24e1bff.svg"},34:function(e,a,t){e.exports={profile:"profile_profile__3NYrQ",profileInfo:"profile_profileInfo__3EiED",profilePic:"profile_profilePic__F73CL",userDetails:"profile_userDetails__3pwuC",editBtn:"profile_editBtn__1LT07",formDiv:"profile_formDiv__zj8eq",goBackBtn:"profile_goBackBtn__1PTQa",profileSVG:"profile_profileSVG__TxrUM"}},53:function(e,a,t){e.exports={home:"Home_home__2IsWi",details:"Home_details__n7Evn",login:"Home_login__2WSP5",loginForm:"Home_loginForm__30tXw",steps:"Home_steps__3sOmQ"}},54:function(e,a,t){e.exports={details:"Payment_details__1yqXg",payment:"Payment_payment__3fqPa",pSummary:"Payment_pSummary__1rk1r",voucher:"Payment_voucher__19ngl",vSummary:"Payment_vSummary__2-yYY"}},55:function(e,a,t){e.exports={form:"ProfileForm_form__3offj",fields:"ProfileForm_fields__2IB_9"}},62:function(e,a,t){e.exports={navbar:"Navbar_navbar__10UeP",link:"Navbar_link__1hqGc"}}},[[161,1,2]]]);
//# sourceMappingURL=main.10c65c62.chunk.js.map